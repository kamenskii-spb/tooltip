!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):(t="undefined"!=typeof globalThis?globalThis:t||self).TooltipJs=e()}(this,(function(){"use strict";function t(t,e,o){return e in t?Object.defineProperty(t,e,{value:o,enumerable:!0,configurable:!0,writable:!0}):t[e]=o,t}function e(t,e){let o=0;if(i(t)){const i=30*e.offsetWidth/100;"left"===t.arrowPosition?o+=i:o-=i}return o}function o(t,e){let o=0;if(s(t)){const i=30*e.offsetHeight/100;"top"===t.arrowPosition?o+=i:o-=i}return o}function i(t){return["left","right"].includes(t.arrowPosition)&&["top","bottom"].includes(t.position)}function s(t){return["top","bottom"].includes(t.arrowPosition)&&["left","right"].includes(t.position)}return class{constructor(i,s={}){if(t(this,"$element",null),t(this,"$tooltip",null),t(this,"content",""),t(this,"eventMove",null),t(this,"options",{}),t(this,"tooltipOpen",!1),"string"==typeof i)this.$element=document.querySelector(i);else{if("object"!=typeof i)throw new Error("Tooltip node incorrect typeof ");this.$element=i}this.options.margin=s.margin||15,this.options.position=s.position||"left",this.options.arrowPosition=s.arrowPosition||!1,this.options.cross=s.cross||!1,this.options.tooltipMove=s.tooltipMove||!1,this.options.arrow=s.arrow||!1,this.options.class=s.class||"",this.$element&&(this.options.tooltipMove&&(this.eventMove=t=>{if(!this.$tooltip)return;const i=this.$element.getBoundingClientRect();let s=t.pageX+e(this.options,this.$tooltip),n=t.pageY+o(this.options,this.$tooltip);["left","right"].includes(this.options.position)?this.$tooltip.style.top=i.top+window.pageYOffset-this.$tooltip.offsetHeight/2+n-this.$element.offsetTop+"px":["top","bottom"].includes(this.options.position)&&(this.$tooltip.style.left=i.left+-1*(i.left-s)-this.$tooltip.offsetWidth/2+"px")},this.$element.addEventListener("mousemove",this.eventMove)),this.resizeHandler=()=>{this.tooltipOpen&&this.close()},window.addEventListener("resize",this.resizeHandler,!1))}open(t=""){"complete"!==document.readyState||this.tooltipOpen||(this.tooltipOpen=!0,this.$tooltip=function(t,n,l){const r=function(t,e,o){const n=document.createElement("div");e.class&&n.classList.add(e.class);n.classList.add("km-tooltip");const l=e.cross?'\n              <span\n              class="km-times"\n              data-cross=true\n              >&times;</span>\n          ':"";n.innerHTML=l+o,e.arrow&&n.insertAdjacentElement("afterbegin",function(t){const e=document.createElement("div");e.classList.add("km-tooltip-arrow",`km-tooltip-arrow-${t.position}`),i(t)&&e.classList.add(`km-tooltip-arrow-position-${t.arrowPosition}`);s(t)&&e.classList.add(`km-tooltip-arrow-position-${t.arrowPosition}`);return e}(e));return n}(0,n,l);return document.body.appendChild(r),function(t,i,s){const n=t.getBoundingClientRect();let l=n.left+t.offsetWidth/2-i.offsetWidth/2;const r=e(s,i),p=o(s,i),f=l+r+"px";switch(s.position){case"top":i.style.top=function(t,e,o){return t.getBoundingClientRect().top+window.pageYOffset-e.offsetHeight-o.margin}(t,i,s)+"px",i.style.left=f;break;case"bottom":i.style.top=function(t,e){return t.getBoundingClientRect().bottom+window.pageYOffset+e.margin}(t,s)+"px",i.style.left=f;break;case"left":i.style.top=function(t,e){return window.pageYOffset+t.getBoundingClientRect().top+t.offsetHeight/2-e.offsetHeight/2}(t,i)+p+"px",i.style.left=n.left-i.offsetWidth-s.margin+"px";break;case"right":i.style.top=function(t,e){return window.pageYOffset+t.getBoundingClientRect().top+t.offsetHeight/2-e.offsetHeight/2}(t,i)+p+"px",i.style.left=n.left+t.offsetWidth+s.margin+"px"}}(t,r,n),r}(this.$element,this.options,t),this.$tooltip.classList.add("km-tooltip-open"),this.options.cross&&this.$tooltip.addEventListener("click",(t=>{t.target.dataset.cross&&this.close()})))}close(){this.tooltipOpen&&(this.$tooltip.remove(),this.tooltipOpen=!1)}destroy(){this.close(),this.eventMove&&this.$element.removeEventListener("mousemove",this.eventMove),window.removeEventListener("resize",this.resizeHandler)}}}));
