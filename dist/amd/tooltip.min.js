define((function(){"use strict";function t(t,o,e){return o in t?Object.defineProperty(t,o,{value:e,enumerable:!0,configurable:!0,writable:!0}):t[o]=e,t}function o(t,o){let e=0;if(i(t)){const i=30*o.offsetWidth/100;"left"===t.arrowPosition?e+=i:e-=i}return e}function e(t,o){let e=0;if(s(t)){const i=30*o.offsetHeight/100;"top"===t.arrowPosition?e+=i:e-=i}return e}function i(t){return["left","right"].includes(t.arrowPosition)&&["top","bottom"].includes(t.position)}function s(t){return["top","bottom"].includes(t.arrowPosition)&&["left","right"].includes(t.position)}return class{constructor(i,s={}){if(t(this,"$element",null),t(this,"$tooltip",null),t(this,"content",""),t(this,"eventMove",null),t(this,"options",{}),t(this,"tooltipOpen",!1),"string"==typeof i)this.$element=document.querySelector(i);else{if("object"!=typeof i)throw new Error("Tooltip node incorrect typeof ");this.$element=i}this.options.margin=s.margin||15,this.options.position=s.position||"left",this.options.arrowPosition=s.arrowPosition||!1,this.options.cross=s.cross||!1,this.options.tooltipMove=s.tooltipMove||!1,this.options.arrow=s.arrow||!1,this.options.class=s.class||"",this.$element&&(this.options.tooltipMove&&(this.eventMove=t=>{if(!this.$tooltip)return;const i=this.$element.getBoundingClientRect();let s=t.pageX+o(this.options,this.$tooltip),n=t.pageY+e(this.options,this.$tooltip);["left","right"].includes(this.options.position)?this.$tooltip.style.top=i.top+window.pageYOffset-this.$tooltip.offsetHeight/2+n-this.$element.offsetTop+"px":["top","bottom"].includes(this.options.position)&&(this.$tooltip.style.left=i.left+-1*(i.left-s)-this.$tooltip.offsetWidth/2+"px")},this.$element.addEventListener("mousemove",this.eventMove)),this.resizeHandler=()=>{this.tooltipOpen&&this.close()},window.addEventListener("resize",this.resizeHandler,!1))}open(t=""){"complete"!==document.readyState||this.tooltipOpen||(this.tooltipOpen=!0,this.$tooltip=function(t,n,r){const l=function(t,o,e){const n=document.createElement("div");o.class&&n.classList.add(o.class);n.classList.add("km-tooltip");const r=o.cross?'\n              <span\n              class="km-times"\n              data-cross=true\n              >&times;</span>\n          ':"";n.innerHTML=r+e,o.arrow&&n.insertAdjacentElement("afterbegin",function(t){const o=document.createElement("div");o.classList.add("km-tooltip-arrow",`km-tooltip-arrow-${t.position}`),i(t)&&o.classList.add(`km-tooltip-arrow-position-${t.arrowPosition}`);s(t)&&o.classList.add(`km-tooltip-arrow-position-${t.arrowPosition}`);return o}(o));return n}(0,n,r);return document.body.appendChild(l),function(t,i,s){const n=t.getBoundingClientRect();let r=n.left+t.offsetWidth/2-i.offsetWidth/2;const l=o(s,i),p=e(s,i),c=r+l+"px";switch(s.position){case"top":i.style.top=function(t,o,e){return t.getBoundingClientRect().top+window.pageYOffset-o.offsetHeight-e.margin}(t,i,s)+"px",i.style.left=c;break;case"bottom":i.style.top=function(t,o){return t.getBoundingClientRect().bottom+window.pageYOffset+o.margin}(t,s)+"px",i.style.left=c;break;case"left":i.style.top=function(t,o){return window.pageYOffset+t.getBoundingClientRect().top+t.offsetHeight/2-o.offsetHeight/2}(t,i)+p+"px",i.style.left=n.left-i.offsetWidth-s.margin+"px";break;case"right":i.style.top=function(t,o){return window.pageYOffset+t.getBoundingClientRect().top+t.offsetHeight/2-o.offsetHeight/2}(t,i)+p+"px",i.style.left=n.left+t.offsetWidth+s.margin+"px"}}(t,l,n),l}(this.$element,this.options,t),this.$tooltip.classList.add("km-tooltip-open"),this.options.cross&&this.$tooltip.addEventListener("click",(t=>{t.target.dataset.cross&&this.close()})))}close(){this.tooltipOpen&&(this.$tooltip.remove(),this.tooltipOpen=!1)}destroy(){this.close(),this.eventMove&&this.$element.removeEventListener("mousemove",this.eventMove),window.removeEventListener("resize",this.resizeHandler)}}}));
